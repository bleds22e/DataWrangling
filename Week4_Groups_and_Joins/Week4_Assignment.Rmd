---
title: "Week 4 Assignment"
author: "Ellen Bledsoe"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Assignment Details


# Assignment Exercises

### 1. Set-Up

Load the `readr` and `dplyr` packages.

```{r}
library(readr)
library(dplyr)
```

### 2. Shrub Volume Aggregation (10 pts)

This is a follow-up to Shrub Volume Data Basics.

Dr. Morales wants some summary data of the plants at her sites and for her experiments. If the file shrub-volume-data.csv is not already in your work space download it.

This code calculates the average height of a plant at each site:

```{r}
shrub_dims <- read_csv('shrub-volume-data.csv')
by_site <- group_by(shrub_dims, site)
avg_height <- summarize(by_site, avg_height = mean(height))
```


Modify the code to calculate and print the average height of a plant in each experiment.

Add a line of code to use max() to determine the maximum height of a plant at each site.

### 3. Shrub Volume Join (10 pts)

This is a follow-up to Shrub Volume Aggregation.

In addition to the main data table on shrub dimensions, Dr. Morales has two additional data tables. The first describes the manipulation for each experiment. The second provides information about the different sites. Check if the files `shrub-volume-experiments.csv` and `shrub-volume-sites.csv` are in your work space (your instructor may have already added them). 

Import the experiments data and then use `inner_join()` to combine it with the shrub dimensions data to add a manipulation column to the shrub data.

Import the sites data and then combine it with both the data on shrub dimensions and the data on experiments to produce a single data frame that contains all of the data.

### 4. Portal Data Aggregation (10 pts)

Load `surveys.csv` into R using `read.csv()`.

Use the group_by() and summarize() functions to get a count of the number of individuals in each species ID.
Use the group_by() and summarize() functions to get a count of the number of individuals in each species ID in each year.
Use the filter(), group_by(), and summarize() functions to get the mean mass of species DO in each year.


### 5. Fix the Code (15 pts)
This is a follow-up to Shrub Volume Aggregation. If you don’t already have the shrub volume data in your working directory download it.

The following code is supposed to import the shrub volume data and calculate the average shrub volume for each site and, separately, for each experiment.

```{r}
read_csv("shrub-volume-data.csv")
shrub_data |>
  mutate(volume = length * width * height) |>
  group_by(site) |>
  summarize(mean_volume = max(volume))
shrub_data |>
  mutate(volume = length * width * height)
  group_by(experiment) |>
  summarize(mean_volume = mean(volume))
```

  
Fix the errors in the code so that it does what it’s supposed to
Add a comment to the top of the code explaining what it does

### 6. Portal Data Joins (15 pts)

Use inner_join() to create a table that contains the information from both the surveys table and the species table.
Use inner_join() twice to create a table that contains the information from all three tables.
Use inner_join() and filter() to get a data frame with the information from the surveys and plots tables where the plot_type is Control.

### 7. Portal Data dplyr Review (20 pts)

We want to do an analysis comparing the size of individuals on the Control plots to the Long-term Krat Exclosures. Create a data frame with the year, genus, species, weight and plot_type for all cases where the plot type is either Control or Long-term Krat Exclosure. Only include cases where Taxa is Rodent. Remove any records where the weight is missing.

### 8. Extracting vectors from data frames (10 pts)
Using the Portal data surveys table (download a copy if it’s not in your working directory):

Use `$` to extract the weight column into a vector
Use `[]` to extract the month column into a vector
Extract the hindfoot_length column into a vector and calculate the mean hindfoot length ignoring null values.

### 9. Building data frames from vectors (10 pts)
You have data on the length, width, and height of 10 individuals of the yew (_Taxus baccata_) stored in the following vectors:

```{r}
length <- c(2.2, 2.1, 2.7, 3.0, 3.1, 2.5, 1.9, 1.1, 3.5, 2.9)
width <- c(1.3, 2.2, 1.5, 4.5, 3.1, NA, 1.8, 0.5, 2.0, 2.7)
height <- c(9.6, 7.6, 2.2, 1.5, 4.0, 3.0, 4.5, 2.3, 7.5, 3.2)
```

Make a data frame that contains these three vectors as columns along with a genus column containing the name Taxus on all rows and a species column containing the word baccata on all rows.
